<p style="color: green"><%= notice %></p>

<%= render @post %>

<div>
<% if policy(@post).edit? %>
  <%= link_to "Edit this post", edit_post_path(@post) %>
<% end %>
  <%= link_to "Back to posts", posts_path %>
  <%= button_to "Destroy this post", @post, method: :delete if policy(@post).destroy? %>

<%= link_to "Comment on this post", new_post_remark_path(@post) %>
</div>
<% if user_signed_in? %>
  <% if @post.liked?(current_user) %>
    <%= button_to "Like", like_path(@post), method: "put", disabled: true %>
  <% else %>
    <%= button_to "Like", like_path(@post), method: "put" %>
  <% end %>
<% end %>
<%# <% raise %> %>
<% @remarks.each do |remark| %>
  <%= link_to "edit this remark", edit_post_remark_path(@post, remark) if (current_user == remark.user_id) || (current_user.admin?) %>
  <%= remark.title %>
  <%= link_to "destroy this remark", post_remark_path(@post, remark), data: { turbo_method: :delete, turbo_confirm: "Are you sure?"} if (current_user == remark.user_id) || (current_user.admin?) %>
  <%= remark.title %>
  <%# <%= link_to "delete this remark", post_remark_path(remark.post_id), method: :delete %> %>
  <%# <% raise %> %>
<% end %>
<%= link_to "home", root_path %>
